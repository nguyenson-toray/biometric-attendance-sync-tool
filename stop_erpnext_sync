#!/bin/bash

cd /home/sonnt/frappe-bench/apps/biometric-attendance-sync-tool

if [ -f erpnext_sync.pid ]; then
    PID=$(cat erpnext_sync.pid)
    if kill -0 $PID 2>/dev/null; then
        kill $PID
        echo "ERPNext sync service stopped (PID: $PID)"
        rm -f erpnext_sync.pid
    else
        echo "Process with PID $PID is not running"
        rm -f erpnext_sync.pid
    fi
else
    echo "PID file not found. Service may not be running or was started differently."
    # Try to kill any running erpnext_sync.py processes
    pkill -f "erpnext_sync.py"
    if [ $? -eq 0 ]; then
        echo "Found and stopped erpnext_sync.py process"
    else
        echo "No erpnext_sync.py process found"
    fi
fi